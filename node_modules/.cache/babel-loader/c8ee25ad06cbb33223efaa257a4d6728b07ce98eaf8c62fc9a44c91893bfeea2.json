{"ast":null,"code":"import { computed, ref } from 'vue';\nimport { defineStore } from \"pinia\";\nimport httpAuth from '@/services/httpAuth.js';\nexport const useAuth = defineStore('auth', () => {\n  const token = ref(localStorage.getItem(\"token\"));\n  const user = ref(JSON.parse(localStorage.getItem(\"user\")));\n  async function setToken(tokenValue) {\n    try {\n      localStorage.setItem('token', tokenValue);\n      token.value = tokenValue;\n      console.log(\"foi\");\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  function setUser(userValue) {\n    localStorage.setItem('user', JSON.stringify(userValue));\n    user.value = userValue;\n  }\n  const isAuthenticated = computed(() => {\n    return token.value && user.value;\n  });\n  function clear() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    user.value = '';\n    token.value = '';\n  }\n  async function checkToken() {\n    try {\n      const tokenAuth = 'Bearer ' + token.value;\n      const {\n        data\n      } = await httpAuth.get('/auth/verify', {\n        headers: {\n          Authorization: tokenAuth\n        }\n      });\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  return {\n    checkToken,\n    token,\n    user,\n    setToken,\n    setUser,\n    isAuthenticated,\n    clear\n  };\n});","map":{"version":3,"names":["computed","ref","defineStore","httpAuth","useAuth","token","localStorage","getItem","user","JSON","parse","setToken","tokenValue","setItem","value","console","log","error","setUser","userValue","stringify","isAuthenticated","clear","removeItem","checkToken","tokenAuth","data","get","headers","Authorization"],"sources":["C:/Users/UsuÃ¡rio/Documents/teste-pratico/front-end-teste/src/stores/auth.js"],"sourcesContent":["import { computed, ref } from 'vue';\r\nimport { defineStore } from \"pinia\";\r\nimport httpAuth from '@/services/httpAuth.js';\r\n\r\nexport const useAuth = defineStore('auth', () => {\r\n  const token = ref(localStorage.getItem(\"token\"));\r\n  const user = ref(JSON.parse(localStorage.getItem(\"user\")));\r\n\r\nasync  function setToken(tokenValue) {\r\n    try {\r\n      localStorage.setItem('token', tokenValue);\r\n      token.value = tokenValue;   \r\n      console.log(\"foi\")   \r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n\r\n  }\r\n\r\n  function setUser(userValue) {\r\n    localStorage.setItem('user', JSON.stringify(userValue));\r\n    user.value = userValue;\r\n  }\r\n\r\n  const isAuthenticated = computed(() => {\r\n    return token.value && user.value;\r\n  });\r\n\r\n  function clear() {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    user.value = '';\r\n    token.value = '';\r\n  }\r\n\r\n  async function checkToken() {\r\n    try {\r\n      const tokenAuth = 'Bearer ' + token.value;\r\n      const { data } = await httpAuth.get('/auth/verify', {\r\n        headers: {\r\n          Authorization: tokenAuth\r\n        }\r\n      });\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return {\r\n    checkToken,\r\n    token,\r\n    user,\r\n    setToken,\r\n    setUser,\r\n    isAuthenticated,\r\n    clear\r\n  };\r\n});\r\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,GAAG,QAAQ,KAAK;AACnC,SAASC,WAAW,QAAQ,OAAO;AACnC,OAAOC,QAAQ,MAAM,wBAAwB;AAE7C,OAAO,MAAMC,OAAO,GAAGF,WAAW,CAAC,MAAM,EAAE,MAAM;EAC/C,MAAMG,KAAK,GAAGJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;EAChD,MAAMC,IAAI,GAAGP,GAAG,CAACQ,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;EAE5D,eAAgBI,QAAQA,CAACC,UAAU,EAAE;IACjC,IAAI;MACFN,YAAY,CAACO,OAAO,CAAC,OAAO,EAAED,UAAU,CAAC;MACzCP,KAAK,CAACS,KAAK,GAAGF,UAAU;MACxBG,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IACpB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;IACpB;EAEF;EAEA,SAASC,OAAOA,CAACC,SAAS,EAAE;IAC1Bb,YAAY,CAACO,OAAO,CAAC,MAAM,EAAEJ,IAAI,CAACW,SAAS,CAACD,SAAS,CAAC,CAAC;IACvDX,IAAI,CAACM,KAAK,GAAGK,SAAS;EACxB;EAEA,MAAME,eAAe,GAAGrB,QAAQ,CAAC,MAAM;IACrC,OAAOK,KAAK,CAACS,KAAK,IAAIN,IAAI,CAACM,KAAK;EAClC,CAAC,CAAC;EAEF,SAASQ,KAAKA,CAAA,EAAG;IACfhB,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC;IAChCjB,YAAY,CAACiB,UAAU,CAAC,MAAM,CAAC;IAC/Bf,IAAI,CAACM,KAAK,GAAG,EAAE;IACfT,KAAK,CAACS,KAAK,GAAG,EAAE;EAClB;EAEA,eAAeU,UAAUA,CAAA,EAAG;IAC1B,IAAI;MACF,MAAMC,SAAS,GAAG,SAAS,GAAGpB,KAAK,CAACS,KAAK;MACzC,MAAM;QAAEY;MAAK,CAAC,GAAG,MAAMvB,QAAQ,CAACwB,GAAG,CAAC,cAAc,EAAE;QAClDC,OAAO,EAAE;UACPC,aAAa,EAAEJ;QACjB;MACF,CAAC,CAAC;MACF,OAAOC,IAAI;IACb,CAAC,CAAC,OAAOT,KAAK,EAAE;MACdF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;IACpB;EACF;EAEA,OAAO;IACLO,UAAU;IACVnB,KAAK;IACLG,IAAI;IACJG,QAAQ;IACRO,OAAO;IACPG,eAAe;IACfC;EACF,CAAC;AACH,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}